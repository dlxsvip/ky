h3.page-header
    span 关键词管理

.container-fluid(ng-controller='keywordManageCtrl')
  .row.search-dtdream
    .col-lg-12
        .col-lg-7.search-dtdream-row


            //.col-lg-3.change-ui-select-key
                ui-select.text-left(ng-model='selected.selected', theme='bootstrap', search-enabled='true', ng-disabled='disabled')
                    ui-select-match {{$select.selected}}
                    ui-select-choices(repeat='name in selected.name' ng-click='changeType()')
                        span(ng-bind-html='name')
            //.col-lg-3(ng-show='status')
                ui-select.text-left(ng-model='keywordStatus.selected', theme='bootstrap', search-enabled='true', ng-disabled='disabled')
                    ui-select-match {{$select.selected}}
                    ui-select-choices(repeat='status in keywordStatus.status | filter: $select.search')
                        span(ng-bind-html='status')
                        b.fa.fa-check.region-ok-style
            //.col-lg-4(ng-show='name')
                input.form-control(type='text', placeholder='请输入{{selected.selected}}', ng-model='selected.searchValue', ng-change='getNullCondition()', ng-keyup='testEnter($event)')
            .col-lg-6
                .col-lg-3
                    label.search-label 关键字名称 :
                .col-lg-9
                    input.form-control(type='text', placeholder='请输入关键字名称', ng-model='selected.searchValue', ng-keyup='testEnter($event)')
            .col-lg-1
                button.btn.btn-primary(ng-click='searchDetail()') 查询
        .pull-right
            button.btn.brand-btn-color-a.brand-btn-abandon-focus(ng-click='addKeyword()') 添加
  .row
    .col-lg-12
        table.table.table-dtdream(ng-table='keywordManage.tableParams', template-pagination='app/views/ngtable-foot.html', block-ui="keywordManageBlockUI" )
            tbody
                tr(ng-repeat='item in $data' ng-class= "{ 'trActive': item.selected == true}")
                    td(data-title="'关键字名称'")
                        a(href='#', ng-click='keywordDetailOpen(item)') {{item.keywordName}}
                    td(data-title="'描述'")
                        span {{item.description}}
                    td(data-title="'注册时间'")
                        span {{item.createTime}}
                    //td(data-title="'状态'")
                        span {{item.status}}
                    td(data-title="'操作'")
                        a(href='#', ng-click='editKeyword(item)') 编辑
                        a(href='#', ng-click='deleteKeyword(item)') 删除
                        //.btn-group(dropdown='dropdown', style='vertical-align:top')
                            a(href='', dropdown-toggle='') 管理
                            ul.dropdown-menu.animated.fadeInDown(role='menu')
                                //li
                                    a(ng-if="item.status == '停止'", ng-click='startKeywordManageItemOpen($index)') 启用

                                li
                                    a(href='#', ng-click='keywordDetailOpen(item)') 查看详情
                                li
                                    a(href='#', ng-click='editKeyword(item)') 编辑
                                li
                                    a(href='#', ng-click='deleteKeyword(item)') 删除
                tr.table-nodata-tr(ng-if='keywordManage.tableParams.data==undefined || keywordManage.tableParams.data.length==0')
                    td(colspan='11')
                        div.text-center
                            span.table-nodata-content(ng-show='!isLoading')
                                em.dtdream.dtdream-info-circle
                                | 没有符合条件的数据
script(type="text/ng-template", id='keywordDialog')
    form.form-horizontal(name="keywordAddForm", novalidate="")
        div(block-ui='keywordAddBlock')
            // START modal
            .modal-header
                button.close(type='button', data-dismiss='modal', aria-hidden='true', ng-click='cancel()') ×
                h4.modal-title {{title}}
            .modal-body
                .form-group
                    label.col-lg-3.control-label
                        span.text-danger *
                        | 关键字名称
                    .col-lg-9
                        input.form-control(type='text', name='keywordName', required='',ng-focus="hide()", ng-blur="checkName(keywordInfo.keywordName)", ng-model="keywordInfo.keywordName",placeholder='请输入关键人名称', ng-required="true", ng-disabled="isEdit")
                        small.text-danger(ng-show="keywordAddForm.keywordName.$dirty && keywordAddForm.keywordName.$error.required") 关键字不能为空
                        small.text-danger(ng-show="keywordAddForm.keywordName.$dirty && !checkResult") 该关键字名称已存在
                .form-group
                    label.col-lg-3.control-label
                        span 标签
                    .col-lg-9
                        textarea.form-control(type='textarea', name='label', ng-required='false', rows='8', ng-model='keywordInfo.label')
                .form-group
                    label.col-lg-3.control-label
                        span 描述
                    .col-lg-9
                        textarea.form-control(type='textarea', name='description', ng-required='false', rows='8', ng-model='keywordInfo.description')
            .modal-footer
                button.btn.btn-primary(type='button', ng-click='submitForm()', ng-disabled="keywordAddForm.$invalid || !checkResult" ng-if="title=='添加'") 确定
                button.btn.btn-primary(type='button', ng-click='submitForm()',ng-if="title=='修改'") 确定
                button.btn.btn-default(type='button', ng-click='cancel()') 取消
script(type='text/ng-template', id='keywordDeleteItem')
    .div(block-ui="keywordDeleteBlock")
        .modal-header
            button.close(type='button', data-dismiss='modal', ng-click='cancel()', aria-hidden='true')
                | ×
            h4.modal-title.ng-binding 删除
        .modal-body.clearfix
            .pull-left.col-padding
                span.text-size-32.icon-help-2.text-warning
            .pull-left.col-padding.col-lg-10
                div
                    .col-lg-12
                        span.ng-binding 您所选的关键词将执行删除操作，是否确认删除？
        .modal-footer
            button.btn.btn-primary(ng-click='deleteItem()')
                | 确定
            button.btn.btn-default(ng-click='cancel()')
                | 取消
script(type='text/ng-template', id='keywordStartItem')
    .div(block-ui="keywordStartBlock")
        .modal-header
            button.close(type='button', data-dismiss='modal', ng-click='cancel()', aria-hidden='true')
                | ×
            h4.modal-title.ng-binding 启用
        .modal-body.clearfix
            .pull-left.col-padding
                span.text-size-32.icon-help-2.text-warning
            .pull-left.col-padding.col-lg-10
                div
                    .col-lg-12
                        span.ng-binding 您所选的关键词将执行启用操作，是否确认启用？
        .modal-footer
            button.btn.btn-primary(ng-click='startItem()')
                | 确定
            button.btn.btn-default(ng-click='cancel()')
                | 取消
script(type='text/ng-template', id='keywordStopItem')
    .div(block-ui="keywordStopBlock")
        .modal-header
            button.close(type='button', data-dismiss='modal', ng-click='cancel()', aria-hidden='true')
                | ×
            h4.modal-title.ng-binding 停止
        .modal-body.clearfix
            .pull-left.col-padding
                span.text-size-32.icon-help-2.text-warning
            .pull-left.col-padding.col-lg-10
                div
                    .col-lg-12
                        span.ng-binding 您所选的关键词将执行停止操作，是否确认停止？
        .modal-footer
            button.btn.btn-primary(ng-click='stopItem()')
                | 确定
            button.btn.btn-default(ng-click='cancel()')
                | 取消
script(type="text/ng-template", id='keywordDetailDialog')
    form.form-horizontal(name="keywordDetailForm", novalidate="")
        div(block-ui='keywordDetailBlockUI')
            // START modal
            .modal-header
                button.close(type='button', data-dismiss='modal', aria-hidden='true', ng-click='cancel()') ×
                h4.modal-title 详情
            .modal-body
                .form-group
                    label.col-lg-3.control-label
                        span.text-danger *
                        | 关键字名称
                    .col-lg-9
                        input.form-control(type='text', name='keywordName', required='', ng-model="keywordInfo.keywordName",placeholder='请输入关键人名称', ng-required="true", ng-disabled="isEdit")
                        small.text-danger(ng-show="keywordAddForm.keywordName.$dirty && keywordAddForm.keywordName.$error.required") 关键人不能为空
                .form-group
                    label.col-lg-3.control-label
                        span 标签
                    .col-lg-9
                        textarea.form-control(type='textarea', name='label', ng-required='false', rows='8', ng-model='keywordInfo.label',ng-disabled="isEdit")
                .form-group
                    label.col-lg-3.control-label
                        span 描述
                    .col-lg-9
                        textarea.form-control(type='textarea', name='description', ng-required='false', rows='8', ng-model='keywordInfo.description',ng-disabled="isEdit")
            .modal-footer
                button.btn.btn-default(type='button', ng-click='cancel()') 确定